////
NO CAMBIAR!!
Codificación, idioma, tabla de contenidos, tipo de documento
////
:encoding: utf-8
:lang: es
:toc: right
:toc-title: Tabla de contenidos
:doctype: book
:imagesdir: ./images
:linkattrs:


////
Nombre y título del trabajo
////
# OpenStack-STIC
Servicio de las Tecnologías de la Información y las Comunicaciones - Universidad de Almería


// NO CAMBIAR!! (Entrar en modo no numerado de apartados)
:numbered!: 


image:logocloudstic.png[]

[abstract]
== Resumen

OpenStack-STIC es el servicio de Infraestructura como servicio (IaaS) del Servicio de las Tecnologías de la Información y las Comunicaciones de la Universidad de Almería. Actualmente ofrece servicios de máquinas virtuales, almacenamiento como servicio (almacenamiento de bloques y volúmenes NFS) y balanceadores como servicio.

OpenStack-STIC además, es el soporte para el resto de servicios _cloud_ del STIC (Cloud-STIC), como el registro de imágenes Docker y Kubernetes.

////
***************************************************
////
.Objetivo

* Ofrecer Infraestructura como servicio para el STIC.
* Ofrecer máquinas virtuales para la virtualización de puestos de trabajo y aulas.

// Entrar en modo numerado de apartados
:numbered:


////
***************************************************
////

== Servicios que ofrece OpenStack-STIC

OpenStack-STIC es el proyecto de Cloud-STIC que ofrece Infraestructura como servicio. Pese a ser el proyecto de base sobre el que se sustenta el cloud del STIC, lo consideramos como un componente más. 

Actualmente, OpenStack-STIC ofrece:

* Servicios para la creación de Máquinas y Aulas virtuales.
* Servicios de Almacenamiento tanto de bloques como volúmenes NFS.

== Servicios que ofrece Cloud-STIC

Algunos de los servidores del STIC, como los de registro de imágenes Docker y clusters de Kubernetes, son realmente máquinas virtuales creadas dentro de OpenStack-STIC.

* https://192.168.66.52[Registro de imágenes Docker,window=_blank]
* https://192.168.66.52[Kubernetes,window=_blank]
* ...

== Infraestructura de OpenStack-STIC

=== Plataforma de producción en Alta disponibilidad

* Servidores de cómputo: 24
* RAM disponible: 4.608 GB
* VCPUs: 576
* Espacio disponible para instancias: 103,2 TB
* Almacenamiento disponible para volúmenes: 10,4 TB

== Acceso a OpenStack-STIC

Todos los recursos de OpenStack-STIC, sólo son accesibles desde la red de la UAL. Para el acceso a los recursos de Cloud-STIC desde fuera de la UAL será necesario usar una conexión VPN con el perfil STIC. Consulta http://vpn.ual.es[vpn.ual.es,window=_blank] para configurar tu acceso a la VPN de la UAL. 

== Primeros pasos en OpenStack-STIC

Para utilizar OpenStack-STIC es necesario disponer de una cuenta de usuario. El acceso sólo está permitido desde la red de la UAL. El acceso desde fuera de la UAL se realizará mediante VPN.

=== Solicitud de cuenta de usuario

. Solicita a mailto:xxxxx@ual.es[xxxxx@ual.es] tu acceso a OpenStack-STIC. Te proporcionarán un dominio, un login y un password de acceso.

. Introduce tus credenciales en https://openstack.stic.ual.es/horizon[OpenStack-STIC,window=_blank]. Una vez dentro del sistema tendrás acceso a un _proyecto_ OpenStack.

+
[NOTE]
====
Un proyecto OpenStack es un conjunto de recursos disponible para uno o más usuarios. Ejemplos de recursos básicos son los núcleos de procesador (VCPU), RAM o espacio de almacenamiento.

De forma predeterminada cada usuario tiene un proyecto. No obstante, un mismo usuario puede ser miembro de más de un proyecto (p.e. _Aulas, Servidores de Logs_)
====

=== Cambio de la contraseña

Para cambiar la clave proporcionada, despliega el menú de las opciones del usuario conectado situado en la parte superior derecha y selecciona `Settings`.  

image::Settings.png[]

Se desplegará un menú en la izquierda. A continuación, selecciona `Change password`.

image::ChangePassword.png[]

=== Registra tus claves SSH

Para el acceso SSH a máquinas virtuales Linux creadas en OpenStack-STIC es necesario tener registrada una clave SSH pública en la cuenta de usuario de OpenStack-STIC. Las clave pública SSH será inyectada a las instancias creadas en el proceso de inicialización. Una vez creada la instancia, se accederá a ella mediante la clave privada SSH correspondiente almacenada en el cliente.

. Inicia sesión en https://openstack.stic.ual.es/horizon[OpenStack-STIC,window=_blank].
. En el menú de la izquierda selecciona `Project | Compute | Key Pairs`
. Si dispones de una clave SSH, pulsa el botón `Import Public Key`. En el formulario:
.. Introduce en `Key Pair Name` el nombre que quieres asignar a tu clave pública en OpenStack-STIC
.. Elige `SSH Key` en el desplegable `Key Type` 
.. Carga tu clave pública con el botón `Examinar ... o pegándola directamente en el cuadro de texto `Public Key`.

+
image::ImportPublicKey.png[]

+
[TIP]
====
Si eres usuario de Windows, se recomienda instalar https://git-scm.com/download/win[Git for Windows,window=_blank]. Este software, además de instalar Git para control de versiones, instalará Git BASH en tu sistema, un emulador BASH que te será muy útil para la conexión SSH a máquinas virtuales Linux desde tu sistema Windows.
====

. Si no dispones de una clave SSH, o bien no quieres o no puedes generarla, OpenStack-STIC puede crear un par de claves. Para crear tu par de claves desde OpenStack-STIC pulsa el botón `Create Key Pair`. Introduce en el formulario el nombre que quieras a dar a tu clave SSH y selecciona `SSH Key` en el desplegable `Key Type`.

+
image::CreateKeyPair.png[]

+
A continuación, pulsa el botón `Create Key Pair`. Descarga la clave generada.

+
image::DownloadKeyPair.png[]

=== Configuración de las Reglas de seguridad

En OpenStack-STIC, cada proyecto tiene sus propias reglas de seguridad, y funcionan a modo de cortafuegos sobre las instancias definidas en el proyecto. 

De forma predeterminada, las instancias creadas no se pueden comunicar con el exterior. Configura las reglas de seguridad (p.e. abriendo los puertos SSH, RDP para escritorio remoto de Windows, HTTP para servidores web, ...) de tu proyecto para que se pueda acceder de forma adecuada a las instancias.

La configuración básica de las reglas de seguridad se puede realizar en el menú `Project | Network | Security Groups`.  Desde ahí podrás configurar las reglas predeterminadas (`default`) para todas las máquinas virtuales de un proyecto o crear nuevos grupos de seguridad con reglas específicas.

Pulsando el botón `Manage Rules` accedemos a las reglas de seguridad predeterminadas (`default`) de este proyecto. Por tanto, las máquinas virtuales creadas en este proyecto a las que se apliquen las reglas de seguridad `default` tendrían abierta la comunicación de acuerdo con las reglas indicadas en el grupo de seguridad.

image::SecurityGroups.png[Grupos de seguridad]

[NOTE]
====
De forma predeterminada, el grupo de seguridad `default` no incorpora ninguna regla de seguridad. Hasta que no se le añadan reglas de seguridad, o se creeen grupos de seguridad que añadan reglas de seguridad, no será posible establecer comunicación con las instancias creadas.
====

Pulsa el botón `Add Rule` para añadir reglas de seguridad. En el formulario selecciona la regla de seguridad aplicable a las instancias.

image::AddRule.png[]

[NOTE]
====
Reglas se seguridad básicas:

* RDP (puerto 3389): Acceso de Escritorio remoto. Util para conexión a instancias Windows.
* HTTP (puerto 80): Util para aplicaciones web con servidor Apache.
* SSH (puerto 22): Para establecer una conexión SSH. Util para conexión a la terminal de instancias Linux.
====

image::ManageSecurityGroupRules.png[Grupos de seguridad]

[IMPORTANT]
====
En la red OpenStack-STIC sólo están abiertos los puertos 80 (HHTP), 22 (SSH) y 3389 (RDP) para la conexión VPN. Si necesitas la apertura de un puerto concreto para una instancia o subred determinada, tendrás que solicitarlo mediante CAU.
====

.Consulta la guía de uso oficial de OpenStack
****
Para más información sobre la configuración del acceso y seguridad de las instancias consulta la  https://docs.openstack.org/ocata/user-guide/configure-access-and-security-for-instances.html[Guía de uso oficial de OpenStack,window=_blank]
****
=== Creación de una máquina virtual

Puedes crear una máquina virtual seleccionando `Project | Compute | Instances` y pulsando el botón `Launch instance`.

image::LaunchInstanceButton.png[]

En el asistente deberás proporcionar:

* Paso 1: Nombre de la instancia y cantidad de instancias a crear. La zona de disponibilidad siempre es `nova`. El formulario también muestra el total de instancias (máquinas virtuales) creadas y disponibles.

image::LaunchInstanceDetails.png[]

* Paso 2: En la fuente, selecciona `Image` o `Instance snapshot` dependiendo de si quieres crear una instancia a partir de una imagen limpia, o bien desde un snapshot creado previamente, respectivamente. A continuación, selecciona de la sección `Available` la imagen base para la instancia, el cual se podrá filtrar introduciendo en el cuadro de búsqueda alguno de los caracteres del nombre de la imagen.

[IMPORTANT]
====
Desactiva la creación de un nuevo volumen asociado a la instancia. Crear una máquina virtual sobre un volumen hará que la máquina virtual se almacene en el NAS en lugar de en los servidores de cómputo.
Si más adelante necesitas crear uno o más volúmenes para tu instancia, podrás crearlos desde el menú de volúmenes (`Project | Volumes`).
====

image::LaunchInstanceSource.png[Selección de una imagen base para la instancia]

* Paso 3. Sabor de las instancias creadas. OpenStack denomina _sabor_ a un conjunto de propiedades que representan las características hardware de las instancias a crear (número de VPUs, RAM, espacio de disco, ...). Selecciona un sabor adecuado para la instancia a crear.

image::LaunchInstanceFlavor.png[]

[NOTE]
====
Una señal de advertencia puede estar indicando un sabor demasiado pequeño para la instancia a crear o una superación de la cuota de los recursos del proyecto.
====

* Paso 4. Red a la que conectar la instancia creada. Seleccionar entre las redes disponibles la red a la que conectar la máquina virtual. Normalmente, conectaremos la instancia en la red del proyecto, aunque es posible conectarla a cualquier otra red que tengamos creada.

image::LaunchInstanceNetworks.png[]

* Paso 5. Selección de grupos de seguridad. Los grupos seleccionados estableceran los puertos y el tipo de comunicación permitida con la instancia creada. Selecciona todos los grupos de seguridad aplicables a la instancia creada. En la sección `Allocated` aparecerán todos los grupos de seguridad aplicables inicialmente a la instancia.

image::LaunchInstanceSecurityGroups.png[]

* Paso 6. Selección de la clave pública. Para instancias Linux deberemos seleccionar la clave pública a inyectar a la instancia creada. Dicha clave será la que se emparejará con nuestra clave privada local en el momento de la conexión SSH.

[NOTE]
====
En máquinas Windows no es necesario inyectar la clave pública.
====

image::LaunchInstanceKeyPair.png[]

[IMPORTANT]
====
No seleccionar una clave pública para una instancia Linux creada supondrá la creación de una instancia a la que no nos podremos conectar, ya que de forma predeteminada, las instancias Linux de OpenStack-STIC sólo permiten su acceso a través de claves SSH.
====

Pulsar el botón `Launch Instance` para proceder a la creación de la instancia. Tras unos instantes la instancia estará creada y disponible para su uso.



.Consulta la guía de uso oficial de OpenStack
****
Para más información sobre la creación de instancias consulta la  https://docs.openstack.org/ocata/user-guide/dashboard-launch-instances.html[Guía de uso oficial de OpenStack,window=_blank]
****

=== Asignación de IP flotante

Las instancias creadas son conectadas a una de las redes privadas de un proyecto OpensStack-STIC. Inicialmente, es posible la comunicación entre las instancias de dicha red. Pero de forma predeterminada, no es posible la conexión a la instancia creada desde nuestro equipo de trabajo, o en general, desde otro equipo que esté fuera de la red del proyecto en el que se ha creado la máquina virtual.

Podemos ver la instancia creada y conectada a la red del proyecto en el menú `Project | Network | Network Topology`.

image::NetworkTopology.png[]

Las IPs flotantes son la base para la comunicación con la instancia desde el exterior. Nuestro proyecto tiene una cuota de IPs flotantes y deberemos gestionarlas de forma eficiente.

Para asignar una IP flotante a una instancia, mostrar en primer lugar la lista de instancias (`Project | Compute | Instances`). A continuación, seleccionar `Associate Floating IP` en el menú desplegable de la instancia.

image::AssociateFloatingIP.png[]

En el formulario, pulsar el botón `+` para pedir una IP flotante. 

image::ManageFloatingIPAssociations.png[]

El formulario siguiente muestra la red que propocionará las IPs flotantes (`ual-net`), que es la red de OpenStack-STIC. En este formulario pulsaremos el botón `Allocate IP`.

image::AllocateFloatingIP.png[]

[NOTE]
====
El STIC tiene reservada la red 192.168.128.0/21 para OpenStack-STIC.
====

De vuelta al formulario, se mostrará la IP flotante asignada de la red `ext-net`. Pulsar el botón `Associate`.

image::AssignedFloatingIP.png[]

Ahora la instancia aparecerá con la IP flotante asignada, la cual podremos usar para conectarnos a ella desde fuera de la red privada de OpenStack-STIC en la que se creó.

image::InstanceWithFloatingIP.png[]

=== Conexión a la máquina virtual

Una vez creada la máquina virtual y asignada una IP flotante en el caso de que queramos conectarnos a ella desde una red diferente a la que fue creada, usaremos un cliente para conectarnos a ella usando un cliente.


.Clientes habituales de conexión a máquinas virtuales
[width="100%",cols="^,^,^",options="header"]
|====================
| Sistema operativo | Uso                        | Cliente recomendado
| Linux             | Terminal                   | Terminal
|                   | Linux con Interfaz gráfica | https://wiki.x2go.org/doku.php/download:start[X2Go,window=_blank] 
|                   | Máquina Windows            | https://www.remmina.org/wp/[Remmina,window=_blank]
| Mac               | Terminal                   | Terminal
|                   | Linux con Interfaz gráfica | https://wiki.x2go.org/doku.php/download:start[X2Go,window=_blank]  
|                   | Máquina Windows            | https://itunes.apple.com/us/app/microsoft-remote-desktop-10/id1295203466?mt=12[Microsoft Remote Desktop,window=_blank]
| Windows           | Terminal                   | https://git-scm.com/download/win[Git BASH,window=_blank], Putty
|                   | Linux Interfaz gráfica     | https://wiki.x2go.org/doku.php/download:start[X2Go,window=_blank]  
|                   | Máquina Windows            | Cliente de escritorio remoto

|====================

== Imágenes disponibles en OpenStack-STIC

Actualmente están disponibles las imágenes siguientes en OpenStack-STIC:


.Imágenes en OpenStack-STIC y modos de acceso
[width="100%",cols="^,^,^",options="header"]
|====================
| Image | Login | Modo de acceso
| Ubuntu 16.04 LTS | ubuntu | Key Pair 
| Ubuntu 18.04 LTS | ubuntu | Key Pair 
| CentOS 6 | centos | Key Pair  
| cirros | cirros | Key Pair 
|====================

[NOTE]
====
Contacta con mailto:xxxxx@ual.es[xxxxx@ual.es] para obtener la contraseña para instancias en las que el modo de acceso no sea con Key Pair.
====
== Uso de volúmenes en OpenStack-STIC

OpenStack-STIC ofrece un servicio de almacenamiento de bloques, lo que nos permite poder crear volúmenes y conectarlos a máquinas virtuales. Los volúmenes nos dan almacenamiento persistente, entendido como que el volumen se conserva a pesar de que se elimine la máquina virtual a la que está conectado.

=== Creación de un volumen

. Inicia sesión en https://openstack.stic.ual.es/horizon[OpenStack-STIC,window=_blank].
. Selecciona el proyecto en el que crear el volumen.
. En el menú de la izquierda selecciona `Project | Volumes`.
. En la pestaña `Volumes` pulsa el botón `Create Volume`.

+
image::CreateVolumeButton.png[]

. En el formulario introduce los valores para el nombre del volumen y el tamaño. 

+
image::CreateVolume.png[]

. Pulsa el botón `Create Volume`.

Tras unos instantes el volumen aparecerá en la lista de volúmenes creados y disponible para ser conectado a una instancia.

=== Conexión de un volumen a una instancia

Una vez creado un volumen, éste puede ser conectado a una instancia.

[IMPORTANT]
====
Un volumen sólo puede estar conectado a una instancia. Para conectarlo a otra instancia, el volumen tendrá que ser desconectado previamente.
====

. Inicia sesión en https://openstack.stic.ual.es/horizon[OpenStack-STIC,window=_blank].
. Selecciona el proyecto en el que crear el volumen.
. En el menú de la izquierda selecciona `Project | Volumes`.
. En el submenú `Volumes` selecciona el volumen que quieras conectar a una instancia, despliega el listbox de `Actions` y selecciona `Manage Attachments`.

+
image::ManageAttachmentsOption.png[]

. Selecciona en el formulario la instancia a la que conectar el volumen y después pulsa el botón `Attach Volume`

image::ManageVolumeAttachments.png[]

Tras unos instantes el volumen aparecerá conectado a la instancia indicando que está en uso y el dispositivo en el que está disponible.

image::VolumeAttached.png[]

A continuación sigue los pasos del sistema operativo en el que se haya conectado el volumen para inicializarlo (crear tabla de particiones, formatear, montar, ...)

.Consulta la guía de uso oficial de OpenStack
****
Para más información sobre la creación y administración de volúmenes consulta la  https://docs.openstack.org/ocata/user-guide/dashboard-manage-volumes.html[Guía de uso oficial de OpenStack,window=_blank]
****

=== Desconexión de un volumen

. Inicia sesión en https://openstack.stic.ual.es/horizon[OpenStack-STIC,window=_blank].
. Selecciona el proyecto en el que está el volumen a desconectar.
. En el menú de la izquierda selecciona `Project | Volumes`.
. En la pestaña `Volumes` selecciona el volumen que quieras desconectar a una instancia, despliega el listbox de `Actions` y selecciona `Manage Attachments`.
. Pulsa el botón `Detach Volume` para desconectar el volumen de la instancia

image::DetachVolume.png[]

A continuación aparecerá un cuadro de diálogo de confirmación. Pulsar el botón `Detach Volume` para liberar el volumen de la instancia.

image::DetachVolumeConfirm.png[]

=== Transferir un volumen a otro proyecto

Un volumen sólo se puede utilizar en el proyecto al que pertence, pudiendo intercambiarse entre las distintas máquinas virtuales del proyecto. Sin embargo, hay situaciones en las que estamos interesados en usar un volumen en una instancia que tenemos en otro proyecto, o transferir el volumen a otro usuario de OpenStack-STIC. Esta operación es la que se conoce como _Transferir un volumen_ en OpenStack.

[NOTE]
====
Para transferir un volumen, éste ha de estar desconectado. Consulta la sección <<Desconexión de un volumen>>
====

. Inicia sesión en https://openstack.stic.ual.es/horizon[OpenStack-STIC,window=_blank].
. Selecciona el proyecto en el que está el volumen.
. En el menú de la izquierda selecciona `Project | Volumes`.
. En la pestaña `Volumes` selecciona el volumen que quieras transferir, despliega el listbox de `Actions` y selecciona `Create Transfer`.

+
image::CreateTransferOption.png[]

. Introduce un nombre significativo de la transferencia para que pueda ser identificado claramente por otras personas en el caso de que se vaya a transferir el volumen a otro usuario OpenStack.

+
image::CreateVolumeTransfer.png[]

. Pulsa el botón `Create Volume Transfer`. Como resultado se nos mostrará un ID de transferencia y una clave de autorización que debemos conservar para poder completar el proceso de transferencia del volumen. 

+
image::VolumeTransferDetails.png[]

. Descargar el arvhivo con los datos de la transferencia pulsando el botón `Download transfer credentials`. El volumen quedará pendiente de que se complete el proceso aceptando la transferencia.

+
image::AwaitingTransfer.png[]

. En el proyecto de destino de la transferencia pulsar el botón `Accept Transfer`.
. Introducir en el formulario los valores de ID de transferencia y Clave de autorización que descargamos en el archivo de credenciales de la transferencia

+
image::AcceptVolumeTransfer.png[]

. Pulsar el botón `Accept Volume Transfer`. El volumen aparecerá transferido en la lista de volúmenes disponibles del proyecto de destino.

== Aprovisionamiento de una instancia durante la creación

Al crear una instancia en OpenStack-STIC es posible aprovisionarla (configurarla) durante su proceso de creación. De esta forma, nuestras instancias ya tendrán instalados y configurados los paquetes necesarios. 

La configuración de una instancia se realiza en el paso de _Configuration_ del asistente. Básicamente, hay que incluir un script `bash` en el cuadro de texto _Customization Script_ tal y como muestra la figura siguiente.

image:configuracion.png[]

A continuacion, se muestra el script de configuración de Docker CE en una instancia Ubuntu durante su creación.

++++
<script src="https://gist.github.com/ualmtorres/dec19ebed2981459f8e5677979eb04c3.js"></script>
++++

== Almacenamiento compartido de archivos (NFS)

OpenStack-STIC permite la creación de volúmenes NFS y ser compartidos por varias instancias. Los volúmenes NFS nos dan almacenamiento persistente, de forma que el volumen se conserva a pesar de que se eliminen las máquinas virtuales a las que esté conectado.

=== Creación de un volumen NFS

. Inicia sesión en https://openstack.stic.ual.es/horizon[OpenStack-STIC,window=_blank].
. Selecciona el proyecto en el que crear el volumen.
. En el menú de la izquierda selecciona `Project | Share`.
. En en submenú `Shares` pulsa el botón `Create Share`.

+
image::CreateShareButton.png[]

. En el formulario introduce los valores para el nombre del volumen NFS, el tamaño y el tipo de volumen NFS (`default_share_type`). Mantener `NFS` como protocolo.

+
image::CreateShare.png[]

. Pulsa el botón `Create`.

Tras unos instantes, el volumen NFS aparecerá en la lista de volúmenes creados y disponible para ser conectado a las instancias necesarias.

=== Configuración de las reglas de acceso

Una vez creado un volumen NFS, hay que configurar las reglas de acceso que permiten su uso desde las distintas instancias que lo tengan conectado. 

[NOTE]
====
Es posible definir reglas de acceso diferentes para cada instancia (p.e. una instancia tiene acceso de lectura/escritura mientras que el resto sólo lo tienen de lectura).
====

. Inicia sesión en https://openstack.stic.ual.es/horizon[OpenStack-STIC,window=_blank].
. Selecciona el proyecto en el está creado el volumen.
. En el menú de la izquierda selecciona `Project | Share`.
. En en submenú `Shares` selecciona el volumen NFS que quieras configurar, despliega el listbox `Actions` y selecciona `Manage Rules`.

+
image::SelectManageRules.png[]

. Pulsa el botón `Add Rule`
. Completa el formulario `Add Rule` con las reglas de acceso al volumen NFS. A continuación se muestra cómo dar acceso de lectura/escritura vía IP a la dirección IP `192.168.134.208`.

+
image::AddShareRule.png[]

. Pulsar `Add` para definir la regla de acceso.

Aparerá la regla definida para el volumen NFS.

image::AddShareRule.png[]

[NOTE]
====
Las reglas no se pueden modificar. Habrá que eliminarla y volver a crearla de nuevo
====

[TIP]
====
Para dar acceso a varias máquinas virtuales, basta con añadir nuevas reglas indicando la IP el nivel de acceso deseado.
====

=== Conexión de un volumen NFS a una instancia

Una vez definidas las reglas de acceso a un volumen NFS procederemos a conectarlo a una instancia.

. Inicia sesión en https://openstack.stic.ual.es/horizon[OpenStack-STIC,window=_blank].
. Selecciona el proyecto en el que está creado el volumen NFS.
. En el menú de la izquierda selecciona `Project | Share`.
. En el submenú `Shares` haz clic sobre el nombre volumen NFS que quieras conectar a una instancia.
. En la página aparecen los detalles definidos con las reglas de acceso. Copia el valor de `Path`. Este será el valor que usaremos en las instancias que monten este volumen.

+
image::ShareDetails.png[]

. Selecciona en el formulario la instancia a la que conectar el volumen y después pulsa el botón `Attach Volume`

A continuación sigue los pasos del sistema operativo en el que se haya conectado el volumen para inicializarlo y usarlo (crear tabla de particiones, formatear, montar, …​)

.Conexión de un volumen NFS en Ubuntu
====
```
$ sudo apt install nfs-common <1>
$ sudo mkdir /mnt/proyectos <2>
$ sudo mount 192.168.128.17:/var/lib/manila/mnt/share-b65fa3e5-233d-4ea5-9ad2-ec0329654fba /mnt/proyectos <3>
```
<1> Instalación de paquetes NFS
<2> Creación del directorio donde montar el volumen NFS
<3> Montar el volumen NFS en el directorio creado usando el `path` devuelto en las propiedades del volumen NFS.

Podemos comprobar que el volumen está creado

image::VolumenNFSMontado.png[]
====

.Consulta la guía de uso oficial de OpenStack
****
Para más información sobre la creación y administración de volúmenes NFS consulta la  https://docs.openstack.org/horizon/pike/user/manage-shares.htmll[Guía de uso oficial de OpenStack,window=_blank]
****

=== Extender un volumen NFS

Los volúmenes NFS pueden ser extendidos y esta operación se puede hacer _en caliente_, sin necesidad de desconectar el volumen previamente.

. Inicia sesión en https://openstack.stic.ual.es/horizon[OpenStack-STIC,window=_blank].
. Selecciona el proyecto en el que está creado el volumen NFS.
. En el menú de la izquierda selecciona `Project | Share`.
. En el submenú `Shares` despliega el menú `Actions` del volumen NFS que quieras extender y selecciona `Extend Share`.
. Define el nuevo tamaño del volumen y pulsa el botón `Extend`.

+
image::ExtendShare.png[]

Se puede comprobar que, tras extender el volumen, el espacio aparece disponible de inmediato.

image::VolumenNFSExtendido.png[]

== Balancedores como servicio (LBaaS)

ToDo

== Recursos complementarios

* https://www.youtube.com/playlist?list=PLoS04oY1FHPP54bnjbp7Iy31ncqhvc41X[Videotutoriales en YouTube sobre recursos y uso de OpenStack-DI,window=_blank]

* https://docs.openstack.org/ocata/user-guide/dashboard.html[Guía de usuario oficial de OpenStack,window=_blank]




